<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Ricochet Chat â€“ History</title>
</head>
<body>

<h1>Ricochet Fuel AI Chat History</h1>

<h3>Dialogue history:</h3>

<ul id="messages"></ul>

<script>
  const apiUrl = '{{ api_url }}';
  const chatId = '{{ chat_id }}';

  getChatHistory();

  function getChatHistory() {
    fetch(`${apiUrl}/pages/client_history/${chatId}`)
            .then(res=> res.json())
            .then(mess => {
      mess.forEach(msg => {
        let msg_text = msg.author + ': ' + msg.text
        appendMessages(msg_text)
      })
    })
  }

  function appendMessages(msg) {
    let messages = document.getElementById('messages')
    let message = document.createElement('li')
    let content = document.createTextNode(msg)
    message.appendChild(content)
    messages.appendChild(message)
  }

</script>
</body>
</html>